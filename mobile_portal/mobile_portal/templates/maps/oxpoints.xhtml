{% extends "maps/base.xhtml" %}
{% load maps %}{% load portal_misc %}

{% block title %}OMP | {{ data.dc_title }}{% endblock %}

{% block content %}

<h1>{{ data.dc_title }}</h1>

<p>
    <a href="{% url maps_entity_nearby_list entity.entity_type.slug,entity.display_id %}">Find things near here</a>
</p>

{% if data.oxp_hasHomepage or data.oxp_hasITHomepage or data.oxp_hasWeblearn %}
<h2>Websites</h2>
<ul>
{% if data.oxp_hasHomepage %}
    <li><a href="{{ data.oxp_hasHomepage.uri }}">Homepage</a></li>
{% endif %}
{% if data.oxp_hasITHomepage %}
    <li><a href="{{ data.oxp_hasITHomepage.uri }}">IT Homepage</a></li>
{% endif %}
{% if data.oxp_hasWeblearn %}
    <li><a href="{{ data.oxp_hasWeblearn.uri }}">Weblearn</a></li>
{% endif %}
{% if data.oxp_hasLibraryHomepage %}
    <li><a href="{{ data.oxp_hasLibraryHomepage.uri }}">Library</a></li>
{% endif %}
</ul>
{% endif %}

{% if data.oxp_occupies %}
<h2>Occupies</h2>
<ul>
{% for place in data.oxp_occupies %}
{% with place|load_oxp_json as place_json %}
    <li><a href="{{ place_json|oxp_portal_url }}">{{ place_json.dc_title }}</a></li>
{% endwith %}
{% endfor %}
</ul>
{% endif %}

{% if data.passiveProperties.oxp_occupies %}
<h2>Occupied by</h2>
<ul>
{% for place in data.passiveProperties.oxp_occupies %}
{% with place|load_oxp_json as place_json %}
    <li><a href="{{ place_json|oxp_portal_url }}">{{ place_json.dc_title }}</a></li>
{% endwith %}
{% endfor %}
</ul>
{% endif %}

{% if data.oxp_subsetOf %}
<h2>Parent unit</h2>
{% with data.oxp_subsetOf|load_oxp_json as place_json %}
<p><a href="{{ place_json|oxp_portal_url }}">{{ place_json.dc_title }}</a></p>
{% endwith %}
{% endif %}

{% if data.passiveProperties.oxp_subsetOf %}
<h2>Sub-units</h2>
<ul>
{% for place in data.passiveProperties.oxp_subsetOf %}
{% with place|load_oxp_json as place_json %}
    <li><a href="{{ place_json|oxp_portal_url }}">{{ place_json.dc_title }}</a></li>
{% endwith %}
{% endfor %}
</ul>
{% endif %}

{% if data.oxp_inImage %}
<h2>Images</h2>
{% for image in data.oxp_inImage %}
<p><img src="{% external_image image.uri %}" alt=""/></p>
{% endfor %}
{% endif %}

{% if entity.location %}
    <h2>Map</h2>
    {% map entity.location %}
{% else %}
    <p>We do not yet have a location for this {{ entity.entity_type.verbose_name }}.</p>
{% endif %}

{{ data }}

{% endblock %}
